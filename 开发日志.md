# 开发日志

​	我急需做出来一个可以应付云创赛的版本。开发的核心取自实训版，我们需要在软件的Open按钮上面做文章，并且需要解决Qt小浏览器和Python守护进程的通信问题。

### OPEN

​	当我们点击一个软件的OPEN按钮的时候将会发生什么？我们做出下面的一些设计，首先服务器是写死的，显示系统只有一个服务器，其次，端口也是写死的，我打算预装Firefox，Vim，LibreOffice三个软件，这三个软件我们打算放到一个容器中，每次只使用一个。

​	当点击OPEN，我们只要做一件事情，那就是首先发一个信息，这个信息就是这个容器的ID号，这个容器ID是要从数据库中读出来的。这个信息会给docker服务器端的Python程序，然后这个python程序调用一个命令行，这个命令行的工作就是docker start一个容器。为了方便，我们在制作容器的时候就要把这个容器绑定到固定的端口上。

​	这个Python程序是一个服务器也是一个客户端，对于Tomcat来说，他是一个服务器，对于客户端的Python守护程序来说他就是一个客户端，全部使用短连接。tomcat和客户端的python都和他通信。当容器被打开，一个程序名称就会发给客户端的python程序，这个程序就会运行一段命令行。然后APP的画面就会出现。

​	这个过程避开了Qt Qsocket的使用。点击网页的OPEN按钮的时候我们也不用刷新页面。

​	总体过程是这样的：OPEN请求提交，tomcat获取这个请求来源的IP（演示系统中可以写死），这个请求要求打开的软件（数据库中的Container Name），以及这个请求的要打开的软件名这三个信息。当Docker服务器这边处理好之后，这个Docker服务器会作为客户端来访问用户端（通过IP地址），短连接，把Docker服务器这边的IP地址（演示环境写死）和发给客户端。然后客户端的Python启动命令行。

### Docker服务器的Python服务器端

​	我们先看Tomcat可不可以和Python这边通信。我们首先规定发送过来的格式，一共三部分信息，一个是客户端IP地址，容器ID，还有一个是软件名称。中间用||符号隔开。第一位是容器ID。第二位是客户端的IP。

​	注意使用root权限打开。



### 客户端的守护程序的Python服务器端

​	这个Python服务器端和Docker编程的模式基本一样，主要接受Docker服务器的IP地址和服务器端口和以及我们要打开的软件名。

​	在客户端中，要先打开守护程序，然后打开Qt。	 

